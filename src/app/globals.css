@import "tailwindcss";
@import "tw-animate-css";

@custom-variant dark (&:is(.dark *));

@theme inline {
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --font-sans: var(--font-geist-sans);
  --font-mono: var(--font-geist-mono);
  --color-chart-5: var(--chart-5);
  --color-chart-4: var(--chart-4);
  --color-chart-3: var(--chart-3);
  --color-chart-2: var(--chart-2);
  --color-chart-1: var(--chart-1);
  --color-ring: var(--ring);
  --color-input: var(--input);
  --color-border: var(--border);
  --color-destructive: var(--destructive);
  --color-accent-foreground: var(--accent-foreground);
  --color-accent: var(--accent);
  --color-muted-foreground: var(--muted-foreground);
  --color-muted: var(--muted);
  --color-secondary-foreground: var(--secondary-foreground);
  --color-secondary: var(--secondary);
  --color-primary-foreground: var(--primary-foreground);
  --color-primary: var(--primary);
  --color-popover-foreground: var(--popover-foreground);
  --color-popover: var(--popover);
  --color-card-foreground: var(--card-foreground);
  --color-card: var(--card);
  --radius-sm: 0.375rem;  /* 6px - small elements like badges */
  --radius-md: 0.5rem;    /* 8px - buttons, inputs */
  --radius-lg: 0.75rem;   /* 12px - cards, containers */
  --radius-xl: 1rem;      /* 16px - large cards, modals */
  --radius-2xl: 1.25rem;  /* 20px - featured elements */
  --radius-full: 9999px;  /* pills, avatars */
}

:root {
  /* 8pt spacing system - modern standard */
  --spacing-1: 0.25rem;  /* 4px - micro adjustments */
  --spacing-2: 0.5rem;   /* 8px - tight spacing */
  --spacing-3: 0.75rem;  /* 12px - compact */
  --spacing-4: 1rem;     /* 16px - standard */
  --spacing-5: 1.25rem;  /* 20px - comfortable */
  --spacing-6: 1.5rem;   /* 24px - generous */
  --spacing-8: 2rem;     /* 32px - section gaps */
  --spacing-10: 2.5rem;  /* 40px - large sections */
  --spacing-12: 3rem;    /* 48px - page sections */

  /* Modern radius system */
  --radius: 0.75rem;     /* 12px - default for cards */

  /* Light mode - optimised for accessibility
     All text meets WCAG 2.1 AA (4.5:1 for normal, 3:1 for large text) */
  --background: oklch(0.995 0 0);            /* Slight off-white, easier on eyes */
  --foreground: oklch(0.12 0 0);             /* Near-black for maximum contrast */
  --card: oklch(1 0 0);                      /* Pure white for cards */
  --card-foreground: oklch(0.12 0 0);
  --popover: oklch(1 0 0);
  --popover-foreground: oklch(0.12 0 0);
  --primary: oklch(0.18 0 0);                /* Dark primary for buttons */
  --primary-foreground: oklch(0.98 0 0);
  --secondary: oklch(0.965 0 0);
  --secondary-foreground: oklch(0.18 0 0);
  --muted: oklch(0.96 0 0);
  --muted-foreground: oklch(0.45 0 0);       /* WCAG AA: 4.6:1 contrast ratio */
  --accent: oklch(0.94 0 0);
  --accent-foreground: oklch(0.18 0 0);
  --destructive: oklch(0.50 0.22 25);        /* Darker red for AA compliance */
  --border: oklch(0.91 0 0);
  --input: oklch(0.91 0 0);
  --ring: oklch(0.55 0.18 250);              /* Blue focus ring - highly visible */
  --chart-1: oklch(0.55 0.20 250);
  --chart-2: oklch(0.50 0.15 160);
  --chart-3: oklch(0.45 0.12 220);
  --chart-4: oklch(0.65 0.18 80);
  --chart-5: oklch(0.55 0.20 30);
}

.dark {
  /* Linear-style dark mode: layered surfaces with subtle elevation
     Base → Card → Elevated creates visual depth without washing out
     Uses subtle blue undertones for richness */
  --background: oklch(0.13 0.006 285);       /* Deep charcoal with hint of blue */
  --foreground: oklch(0.93 0 0);             /* Soft white, not pure (easier on eyes) */
  --card: oklch(0.17 0.006 285);             /* First elevation layer */
  --card-foreground: oklch(0.93 0 0);
  --popover: oklch(0.20 0.006 285);          /* Highest elevation (modals, dropdowns) */
  --popover-foreground: oklch(0.93 0 0);
  --primary: oklch(0.93 0 0);
  --primary-foreground: oklch(0.17 0.006 285);
  --secondary: oklch(0.22 0.008 285);        /* Subtle elevation for sections */
  --secondary-foreground: oklch(0.93 0 0);
  --muted: oklch(0.24 0.01 285);             /* Interactive backgrounds */
  --muted-foreground: oklch(0.68 0 0);       /* WCAG AA: 4.5:1 contrast ratio */
  --accent: oklch(0.28 0.012 285);           /* Hover states - visible lift */
  --accent-foreground: oklch(0.93 0 0);
  --destructive: oklch(0.65 0.18 25);        /* Softer red, still accessible */
  --border: oklch(1 0 0 / 10%);              /* Subtle but visible borders */
  --input: oklch(1 0 0 / 8%);
  --ring: oklch(0.65 0.15 250);              /* Blue focus ring - highly visible */
  --chart-1: oklch(0.65 0.16 250);
  --chart-2: oklch(0.70 0.14 160);
  --chart-3: oklch(0.75 0.14 80);
  --chart-4: oklch(0.65 0.18 300);
  --chart-5: oklch(0.65 0.18 20);
}

@layer base {
  * {
    @apply border-border outline-ring/50;
  }

  html {
    /* Base font size 16px, scales smoothly */
    font-size: 16px;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-rendering: optimizeLegibility;
  }

  body {
    @apply bg-background text-foreground;
    /* Optimal line height for body text readability */
    line-height: 1.6;
    /* Slight letter spacing for improved readability - Stripe style */
    letter-spacing: -0.011em;
  }

  /* Heading styles with proper hierarchy - tighter tracking for headings */
  h1, h2, h3, h4, h5, h6 {
    line-height: 1.15;
    letter-spacing: -0.025em;
    font-weight: 600;
  }

  h1 { font-weight: 700; }

  /* Paragraph spacing */
  p {
    margin-bottom: 1em;
  }

  p:last-child {
    margin-bottom: 0;
  }

  /* Ensure minimum tap targets for accessibility */
  button, a, [role="button"] {
    min-height: 44px;
    min-width: 44px;
  }

  /* Exception for inline links and small elements */
  p a, span a, li a, .badge, [data-slot="badge"] {
    min-height: auto;
    min-width: auto;
  }

  /* Exception for grid/flex item buttons */
  .grid button, .flex button {
    min-height: auto;
    min-width: auto;
  }
}

/* ============================================
   MODERN CARD SYSTEM - Stripe/Linear inspired
   ============================================ */

/* Premium card with subtle depth */
.card-elevated {
  @apply bg-card rounded-2xl;
  border: 1px solid oklch(0 0 0 / 6%);
  box-shadow:
    0 1px 2px oklch(0 0 0 / 4%),
    0 4px 12px oklch(0 0 0 / 3%);
}

.dark .card-elevated {
  border-color: oklch(1 1 1 / 8%);
  box-shadow:
    0 1px 2px oklch(0 0 0 / 20%),
    0 4px 12px oklch(0 0 0 / 15%);
}

/* Hover state for interactive cards */
.card-elevated-interactive {
  @apply bg-card rounded-2xl transition-all duration-200;
  border: 1px solid oklch(0 0 0 / 6%);
  box-shadow:
    0 1px 2px oklch(0 0 0 / 4%),
    0 4px 12px oklch(0 0 0 / 3%);
}

.card-elevated-interactive:hover {
  box-shadow:
    0 2px 4px oklch(0 0 0 / 5%),
    0 8px 24px oklch(0 0 0 / 6%);
  transform: translateY(-1px);
}

.dark .card-elevated-interactive:hover {
  box-shadow:
    0 2px 4px oklch(0 0 0 / 25%),
    0 8px 24px oklch(0 0 0 / 20%);
}

/* Featured/highlighted card */
.card-featured {
  @apply bg-card rounded-2xl;
  border: 1px solid oklch(0.6 0.15 250 / 30%);
  box-shadow:
    0 1px 2px oklch(0 0 0 / 4%),
    0 4px 16px oklch(0.6 0.15 250 / 8%);
}

.dark .card-featured {
  border-color: oklch(0.6 0.15 250 / 40%);
  box-shadow:
    0 1px 2px oklch(0 0 0 / 20%),
    0 4px 16px oklch(0.6 0.15 250 / 15%);
}

/* Metric/stat card with emphasis */
.card-metric {
  @apply bg-gradient-to-br from-card to-muted/30 rounded-2xl;
  border: 1px solid oklch(0 0 0 / 5%);
}

.dark .card-metric {
  @apply bg-gradient-to-br from-card to-muted/20;
  border-color: oklch(1 1 1 / 6%);
}

/* ============================================
   TYPOGRAPHY UTILITIES
   ============================================ */

/* Large display numbers for metrics - Mercury/Stripe style */
.text-metric {
  font-size: 2rem;
  line-height: 1;
  letter-spacing: -0.03em;
  font-weight: 600;
  font-variant-numeric: tabular-nums;
}

@media (min-width: 640px) {
  .text-metric {
    font-size: 2.5rem;
  }
}

/* Secondary metric label */
.text-metric-label {
  font-size: 0.8125rem;
  line-height: 1.4;
  letter-spacing: 0;
  font-weight: 500;
  color: var(--muted-foreground);
}

/* Overline/eyebrow text - small label above metrics */
.text-overline {
  font-size: 0.75rem;
  line-height: 1.3;
  letter-spacing: 0.01em;
  font-weight: 500;
  color: var(--muted-foreground);
}

/* ============================================
   PROGRESS BAR IMPROVEMENTS
   ============================================ */

/* Gradient progress bar for financial data */
.progress-gradient {
  @apply h-2 rounded-full overflow-hidden;
  background: oklch(0.95 0 0);
}

.dark .progress-gradient {
  background: oklch(0.25 0 0);
}

.progress-gradient > div {
  @apply h-full rounded-full;
  background: linear-gradient(90deg,
    oklch(0.6 0.15 250) 0%,
    oklch(0.55 0.18 280) 100%
  );
}

/* ============================================
   SECTION DIVIDERS
   ============================================ */

.section-divider {
  @apply w-full h-px;
  background: linear-gradient(90deg,
    transparent 0%,
    oklch(0 0 0 / 8%) 20%,
    oklch(0 0 0 / 8%) 80%,
    transparent 100%
  );
}

.dark .section-divider {
  background: linear-gradient(90deg,
    transparent 0%,
    oklch(1 1 1 / 10%) 20%,
    oklch(1 1 1 / 10%) 80%,
    transparent 100%
  );
}

/* Hide scrollbar for horizontal scroll elements */
.scrollbar-hide {
  -ms-overflow-style: none;
  scrollbar-width: none;
}
.scrollbar-hide::-webkit-scrollbar {
  display: none;
}

/* ============================================
   ACCESSIBILITY - WCAG 2.1 AA Compliance
   ============================================ */

/* Skip link for keyboard navigation */
.skip-link {
  position: absolute;
  top: -100%;
  left: 50%;
  transform: translateX(-50%);
  padding: 1rem 2rem;
  background: var(--foreground);
  color: var(--background);
  font-weight: 600;
  border-radius: 0.5rem;
  z-index: 9999;
  transition: top 0.2s ease;
}

.skip-link:focus {
  top: 1rem;
  outline: 3px solid var(--ring);
  outline-offset: 2px;
}

/* Enhanced focus states - visible on all interactive elements */
:focus-visible:not(input):not(textarea):not(select) {
  outline: 3px solid var(--ring);
  outline-offset: 2px;
  border-radius: 4px;
}

/* Input elements have their own focus styles - no ring */
input:focus-visible,
input:focus,
textarea:focus-visible,
textarea:focus,
select:focus-visible,
select:focus {
  outline: none !important;
}

/* Focus within for composite components */
:has(:focus-visible) {
  --focus-visible: 1;
}

/* Reduced motion - respect user preferences */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}

/* High contrast mode support */
@media (prefers-contrast: more) {
  :root {
    --muted-foreground: oklch(0.35 0 0);
    --border: oklch(0.7 0 0);
  }

  .dark {
    --muted-foreground: oklch(0.8 0 0);
    --border: oklch(1 0 0 / 25%);
  }
}

/* Forced colors mode (Windows High Contrast) */
@media (forced-colors: active) {
  .card-elevated,
  .card-elevated-interactive,
  .card-featured,
  .card-metric {
    border: 2px solid CanvasText;
  }

  button,
  [role="button"] {
    border: 2px solid ButtonText;
  }
}

/* ============================================
   DARK MODE ELEVATION SYSTEM
   Linear-style layered surfaces
   ============================================ */

/* Surface levels for dark mode depth */
.dark .surface-base {
  background: var(--background);
}

.dark .surface-raised {
  background: var(--card);
}

.dark .surface-overlay {
  background: var(--popover);
}

/* Subtle inner glow for depth in dark mode */
.dark .card-elevated {
  background: linear-gradient(
    180deg,
    oklch(0.18 0.006 285) 0%,
    oklch(0.16 0.006 285) 100%
  );
  border-color: oklch(1 0 0 / 8%);
  box-shadow:
    0 0 0 1px oklch(1 0 0 / 5%) inset,
    0 1px 2px oklch(0 0 0 / 30%),
    0 4px 16px oklch(0 0 0 / 25%);
}

.dark .card-elevated-interactive:hover {
  background: linear-gradient(
    180deg,
    oklch(0.20 0.008 285) 0%,
    oklch(0.18 0.006 285) 100%
  );
  border-color: oklch(1 0 0 / 12%);
  box-shadow:
    0 0 0 1px oklch(1 0 0 / 8%) inset,
    0 2px 4px oklch(0 0 0 / 35%),
    0 8px 24px oklch(0 0 0 / 30%);
}

/* ============================================
   SEMANTIC COLOUR TOKENS
   For accessible status indicators
   ============================================ */

/* Success - Emerald */
.status-success {
  --status-bg: oklch(0.95 0.05 160);
  --status-text: oklch(0.35 0.12 160);
  --status-border: oklch(0.85 0.08 160);
}

.dark .status-success {
  --status-bg: oklch(0.25 0.04 160 / 40%);
  --status-text: oklch(0.75 0.12 160);
  --status-border: oklch(0.40 0.08 160);
}

/* Warning - Amber */
.status-warning {
  --status-bg: oklch(0.95 0.06 85);
  --status-text: oklch(0.45 0.12 70);
  --status-border: oklch(0.85 0.10 80);
}

.dark .status-warning {
  --status-bg: oklch(0.28 0.05 80 / 40%);
  --status-text: oklch(0.78 0.12 80);
  --status-border: oklch(0.45 0.08 80);
}

/* Info - Sky */
.status-info {
  --status-bg: oklch(0.95 0.04 230);
  --status-text: oklch(0.40 0.12 240);
  --status-border: oklch(0.85 0.08 235);
}

.dark .status-info {
  --status-bg: oklch(0.25 0.04 240 / 40%);
  --status-text: oklch(0.75 0.12 240);
  --status-border: oklch(0.40 0.08 240);
}
